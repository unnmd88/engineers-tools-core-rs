//! Типы ошибок для парсера DDR-выражений

use thiserror::Error;

/// Ошибки, которые могут возникнуть при парсинге
#[derive(Error, Debug, Clone, PartialEq)]
pub enum ParseError {
    /// Ошибка: неожиданный символ
    #[error("Неожиданный символ '{0}' на позиции {1}")]
    UnexpectedChar(char, usize),
    
    /// Ошибка: ожидалось число
    #[error("Ожидалось число, получено '{0}'")]
    ExpectedNumber(String),
    
    /// Ошибка: неизвестный оператор
    #[error("Неизвестный оператор '{0}'. Используйте and/or или &/|")]
    UnknownOperator(String),
    
    /// Ошибка: незакрытая скобка
    #[error("Незакрытая скобка, ожидается ')'")]
    UnclosedParen,
    
    /// Ошибка: лишняя закрывающая скобка
    #[error("Лишняя закрывающая скобка")]
    ExtraClosingParen,
    
    /// Ошибка: лишние символы после выражения
    #[error("Лишние символы после выражения: '{0}'")]
    ExtraInput(String),
    
    /// Ошибка: не хватает операнда
    #[error("После оператора '{0}' должно быть выражение")]
    MissingOperand(String),
    
    /// Ошибка: пустое выражение в скобках
    #[error("Пустые скобки")]
    EmptyParens,
    
    /// Ошибка: неправильный формат диапазона
    #[error("Неправильный формат диапазона. Используйте: число-число (например: 1-3)")]
    InvalidRange,
    
    /// Ошибка: начало диапазона больше конца
    #[error("Начало диапазона ({0}) больше конца ({1})")]
    RangeStartGreaterThanEnd(u16, u16),
    
    /// Ошибка: внутренняя ошибка парсера
    #[error("Внутренняя ошибка парсера: {0}")]
    InternalError(String),
}